{"version":3,"sources":["scripts/main.js"],"names":["gameOver","startButton","document","querySelector","restartButton","startMessage","winMessage","loseMessage","board","rows","columns","isMoved","score","winValue","innerText","directions","Left","Right","Down","Up","iterateCells","callback","row","cell","setField","field","createElement","id","toString","update","getElementById","append","startGame","classList","add","remove","appendNewCell","appended","cellNumber","Math","random","floor","column","num","slide","initialRow","slice","filteredRow","filter","i","length","push","slideLeft","r","c","checkGameOver","slideRight","reverse","slideUp","slideDown","lose","win","zeros","currentValue","window","onload","addEventListener","e","code"],"mappings":"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","file":"main.86e3be0d.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst startButton = document.querySelector('.start');\nconst restartButton = document.querySelector('.restart');\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\n\nlet board = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst rows = 4;\nconst columns = 4;\n\nlet isMoved = false;\nlet gameOver;\n\nlet score = 0;\nconst winValue = 2048;\n\ndocument.querySelector('.game-score').innerText = score;\n\nconst directions = {\n  Left: 'ArrowLeft',\n  Right: 'ArrowRight',\n  Down: 'ArrowDown',\n  Up: 'ArrowUp',\n};\n\nwindow.onload = () => (setField());\n\nfunction iterateCells(callback) {\n  for (let row = 0; row < rows; row++) {\n    for (let cell = 0; cell < columns; cell++) {\n     callback(row, cell);\n    }\n  }\n}\n\nfunction setField() {\n  isMoved = false;\n  gameOver = false;\n\n  iterateCells((row, cell) => {\n    const field = document.createElement('div');\n\n    field.id = row.toString() + '-' + cell.toString();\n\n    const num = board[row][cell];\n\n    update(field, num);\n\n    document.getElementById('board').append(field);\n  })\n};\n\nfunction startGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  isMoved = false;\n  gameOver = false;\n  score = 0;\n  document.querySelector('.game-score').innerText = score;\n\n  iterateCells((row, cell) => {\n    const field\n        = document.getElementById(row.toString() + '-' + cell.toString());\n\n      field.id = row.toString() + '-' + cell.toString();\n      update(field, 0);\n  })\n\n  startMessage.classList.add('hidden');\n  winMessage.classList.add('hidden');\n  loseMessage.classList.add('hidden');\n\n  startButton.classList.add('hidden');\n  restartButton.classList.remove('hidden');\n\n  appendNewCell();\n  appendNewCell();\n};\n\nfunction appendNewCell() {\n  let appended = false;\n  const random = Math.random();\n  const cellNumber = random <= 0.1 ? 4 : 2;\n\n  while (!appended) {\n    const row = Math.floor(Math.random() * rows);\n    const column = Math.floor(Math.random() * columns);\n\n    if (board[row][column] === 0) {\n      board[row][column] = cellNumber;\n\n      const field\n        = document.getElementById(row.toString() + '-' + column.toString());\n\n      field.classList.add('field-cell--' + cellNumber.toString());\n      field.innerText = cellNumber.toString();\n\n      appended = true;\n    }\n  }\n};\n\nfunction update(field, num) {\n  field.innerText = '';\n  field.classList = '';\n  field.classList.add('field-cell');\n\n  if (num > 0) {\n    field.innerText = num;\n\n    if (num <= 2048) {\n      field.classList.add('field-cell--' + num.toString());\n    } else {\n      field.classList.add('field-cell--2048');\n    }\n  }\n};\n\nfunction slide(row) {\n  const initialRow = row.slice();\n\n  let filteredRow = row.filter(num => num !== 0);\n\n  for (let i = 0; i < filteredRow.length - 1; i++) {\n    if (filteredRow[i] === filteredRow[i + 1]) {\n      filteredRow[i] *= 2;\n      filteredRow[i + 1] = 0;\n      score += filteredRow[i];\n      isMoved = true;\n    }\n  }\n\n  document.querySelector('.game-score').innerText = score;\n\n  filteredRow = filteredRow.filter(num => num !== 0);\n\n  if (filteredRow.length < columns) {\n    while (filteredRow.length < columns) {\n      filteredRow.push(0);\n    }\n  }\n\n  for (let i = 0; i < filteredRow.length; i++) {\n    if (filteredRow[i] !== initialRow[i]) {\n      isMoved = true;\n    }\n  }\n\n  return filteredRow;\n};\n\nfunction slideLeft() {\n  if (!gameOver) {\n    for (let r = 0; r < rows; r++) {\n      let row = board[r];\n\n      row = slide(row);\n\n      board[r] = row;\n\n      for (let c = 0; c < columns; c++) {\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideRight() {\n  if (!gameOver) {\n    for (let r = 0; r < rows; r++) {\n      let row = board[r];\n\n      row.reverse();\n      row = slide(row);\n      row.reverse();\n\n      board[r] = row;\n\n      for (let c = 0; c < columns; c++) {\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideUp() {\n  if (!gameOver) {\n    for (let c = 0; c < columns; c++) {\n      let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n      row = slide(row);\n\n      for (let r = 0; r < rows; r++) {\n        board[r][c] = row[r];\n\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideDown() {\n  if (!gameOver) {\n    for (let c = 0; c < columns; c++) {\n      let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n      row.reverse();\n      row = slide(row);\n      row.reverse();\n\n      for (let r = 0; r < rows; r++) {\n        board[r][c] = row[r];\n\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction checkGameOver() {\n  let lose = false;\n  let win = false;\n  const zeros = [];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === winValue) {\n        win = true;\n      }\n\n      if (board[r][c] === 0) {\n        zeros.push(0);\n      }\n    }\n  }\n\n  for (let r = 0; r < rows - 1; r++) {\n    for (let c = 0; c < columns - 1; c++) {\n      const currentValue = board[r][c];\n\n      if (\n        (r > 0 && board[r - 1][c] === currentValue)\n        || (r < rows - 1 && board[r + 1][c] === currentValue)\n        || (c > 0 && board[r][c - 1] === currentValue)\n        || (c < columns - 1 && board[r][c + 1] === currentValue)\n      ) {\n        lose = false;\n        break;\n      } else {\n        lose = true;\n      }\n    }\n\n    if (!lose) {\n      break;\n    }\n  }\n\n  if (lose && zeros.length === 0) {\n    loseMessage.classList.remove('hidden');\n    gameOver = true;\n\n    return;\n  }\n\n  if (win) {\n    winMessage.classList.remove('hidden');\n    gameOver = true;\n  }\n}\n\nstartButton.addEventListener('click', () => {\n  startGame();\n});\n\nrestartButton.addEventListener('click', () => {\n  startGame();\n});\n\ndocument.addEventListener('keyup', (e) => {\n  switch (e.code) {\n    case directions.Left:\n      slideLeft();\n      break;\n\n    case directions.Right:\n      slideRight();\n      break;\n\n    case directions.Up:\n      slideUp();\n      break;\n\n    case directions.Down:\n      slideDown();\n      break;\n  }\n});\n"]}